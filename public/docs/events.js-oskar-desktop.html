<!DOCTYPE html><html lang="en" style="font-size:16px"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Source: events.js</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><script src="scripts/third-party/hljs.js" defer="defer"></script><script src="scripts/third-party/hljs-line-num.js" defer="defer"></script><script src="scripts/third-party/popper.js" defer="defer"></script><script src="scripts/third-party/tippy.js" defer="defer"></script><script src="scripts/third-party/tocbot.min.js"></script><script>var baseURL="/",locationPathname="";baseURL=(locationPathname=document.location.pathname).substr(0,locationPathname.lastIndexOf("/")+1)</script><link rel="stylesheet" href="styles/clean-jsdoc-theme.min.css"><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="font-size-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></symbol><symbol id="add-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol><symbol id="minus-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z"/></symbol><symbol id="dark-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol><symbol id="light-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol><symbol id="reset-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"/></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol><symbol id="codepen-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.5 13.202L13 15.535v3.596L19.197 15 16.5 13.202zM14.697 12L12 10.202 9.303 12 12 13.798 14.697 12zM20 10.869L18.303 12 20 13.131V10.87zM19.197 9L13 4.869v3.596l3.5 2.333L19.197 9zM7.5 10.798L11 8.465V4.869L4.803 9 7.5 10.798zM4.803 15L11 19.131v-3.596l-3.5-2.333L4.803 15zM4 13.131L5.697 12 4 10.869v2.262zM2 9a1 1 0 0 1 .445-.832l9-6a1 1 0 0 1 1.11 0l9 6A1 1 0 0 1 22 9v6a1 1 0 0 1-.445.832l-9 6a1 1 0 0 1-1.11 0l-9-6A1 1 0 0 1 2 15V9z"/></symbol><symbol id="close-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></symbol><symbol id="menu-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></symbol></defs></svg></head><body data-theme="dark"><div class="sidebar-container"><div class="sidebar" id="sidebar"><div class="sidebar-items-container"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="Alt.html">Alt</a></div><div class="sidebar-section-children"><a href="AppendTo.html">AppendTo</a></div><div class="sidebar-section-children"><a href="ClassList.html">ClassList</a></div><div class="sidebar-section-children"><a href="Cols.html">Cols</a></div><div class="sidebar-section-children"><a href="Data.html">Data</a></div><div class="sidebar-section-children"><a href="ElementEvent.html">ElementEvent</a></div><div class="sidebar-section-children"><a href="ElementEvents.html">ElementEvents</a></div><div class="sidebar-section-children"><a href="Id.html">Id</a></div><div class="sidebar-section-children"><a href="Name.html">Name</a></div><div class="sidebar-section-children"><a href="ReadOnly.html">ReadOnly</a></div><div class="sidebar-section-children"><a href="SandBox.html">SandBox</a></div><div class="sidebar-section-children"><a href="Src.html">Src</a></div><div class="sidebar-section-children"><a href="TextContent.html">TextContent</a></div><div class="sidebar-section-children"><a href="Type.html">Type</a></div><div class="sidebar-section-children"><a href="dbShape.html">dbShape</a></div><div class="sidebar-section-children"><a href="user.html">user</a></div><div class="sidebar-section-children"><a href="userSettings.html">userSettings</a></div><div class="sidebar-section-children"><a href="vData.html">vData</a></div><div class="sidebar-section-children"><a href="vNode.html">vNode</a></div><div class="sidebar-section-children"><a href="vPermission.html">vPermission</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#DEBUG">DEBUG</a></div><div class="sidebar-section-children"><a href="global.html#addNotification">addNotification</a></div><div class="sidebar-section-children"><a href="global.html#ajax">ajax</a></div><div class="sidebar-section-children"><a href="global.html#appIframeLoaded">appIframeLoaded</a></div><div class="sidebar-section-children"><a href="global.html#appOpen">appOpen</a></div><div class="sidebar-section-children"><a href="global.html#appResizeDown">appResizeDown</a></div><div class="sidebar-section-children"><a href="global.html#appResizeUp">appResizeUp</a></div><div class="sidebar-section-children"><a href="global.html#appendBefore">appendBefore</a></div><div class="sidebar-section-children"><a href="global.html#authSubmit">authSubmit</a></div><div class="sidebar-section-children"><a href="global.html#bool">bool</a></div><div class="sidebar-section-children"><a href="global.html#bubbleToClass">bubbleToClass</a></div><div class="sidebar-section-children"><a href="global.html#bubbleToClassFromElement">bubbleToClassFromElement</a></div><div class="sidebar-section-children"><a href="global.html#cl">cl</a></div><div class="sidebar-section-children"><a href="global.html#closeAllDesktopContextMenus">closeAllDesktopContextMenus</a></div><div class="sidebar-section-children"><a href="global.html#closeAllExplorerContextMenus">closeAllExplorerContextMenus</a></div><div class="sidebar-section-children"><a href="global.html#closeApp">closeApp</a></div><div class="sidebar-section-children"><a href="global.html#closeDesktopCalendar">closeDesktopCalendar</a></div><div class="sidebar-section-children"><a href="global.html#closeMainMenu">closeMainMenu</a></div><div class="sidebar-section-children"><a href="global.html#closeScreenMenu">closeScreenMenu</a></div><div class="sidebar-section-children"><a href="global.html#closeSearchbarMenu">closeSearchbarMenu</a></div><div class="sidebar-section-children"><a href="global.html#countAllFiles">countAllFiles</a></div><div class="sidebar-section-children"><a href="global.html#countSelectedFiles">countSelectedFiles</a></div><div class="sidebar-section-children"><a href="global.html#createElement">createElement</a></div><div class="sidebar-section-children"><a href="global.html#cssVar">cssVar</a></div><div class="sidebar-section-children"><a href="global.html#dbName">dbName</a></div><div class="sidebar-section-children"><a href="global.html#dbStores">dbStores</a></div><div class="sidebar-section-children"><a href="global.html#debounce">debounce</a></div><div class="sidebar-section-children"><a href="global.html#deleteDb">deleteDb</a></div><div class="sidebar-section-children"><a href="global.html#deselectAll">deselectAll</a></div><div class="sidebar-section-children"><a href="global.html#deselectAllApps">deselectAllApps</a></div><div class="sidebar-section-children"><a href="global.html#deselectBasedOnClick">deselectBasedOnClick</a></div><div class="sidebar-section-children"><a href="global.html#deselectDesktopIcons">deselectDesktopIcons</a></div><div class="sidebar-section-children"><a href="global.html#desktopIconContextMenu">desktopIconContextMenu</a></div><div class="sidebar-section-children"><a href="global.html#desktopIconEditName">desktopIconEditName</a></div><div class="sidebar-section-children"><a href="global.html#desktopIconOpener">desktopIconOpener</a></div><div class="sidebar-section-children"><a href="global.html#desktopIconSelect">desktopIconSelect</a></div><div class="sidebar-section-children"><a href="global.html#desktopIconTooltip">desktopIconTooltip</a></div><div class="sidebar-section-children"><a href="global.html#dragApp">dragApp</a></div><div class="sidebar-section-children"><a href="global.html#elementsCollide">elementsCollide</a></div><div class="sidebar-section-children"><a href="global.html#fileRead">fileRead</a></div><div class="sidebar-section-children"><a href="global.html#fileSearchInputHandler">fileSearchInputHandler</a></div><div class="sidebar-section-children"><a href="global.html#getBattery">getBattery</a></div><div class="sidebar-section-children"><a href="global.html#getBluetooth">getBluetooth</a></div><div class="sidebar-section-children"><a href="global.html#getCookie">getCookie</a></div><div class="sidebar-section-children"><a href="global.html#getDestination">getDestination</a></div><div class="sidebar-section-children"><a href="global.html#getIcon">getIcon</a></div><div class="sidebar-section-children"><a href="global.html#getIconTooltipText">getIconTooltipText</a></div><div class="sidebar-section-children"><a href="global.html#getLowestMaxAppZIndex">getLowestMaxAppZIndex</a></div><div class="sidebar-section-children"><a href="global.html#getMethods">getMethods</a></div><div class="sidebar-section-children"><a href="global.html#getParam">getParam</a></div><div class="sidebar-section-children"><a href="global.html#handleFileUpload">handleFileUpload</a></div><div class="sidebar-section-children"><a href="global.html#handleLogin">handleLogin</a></div><div class="sidebar-section-children"><a href="global.html#handleRegister">handleRegister</a></div><div class="sidebar-section-children"><a href="global.html#htmlSpecialCharsDecode">htmlSpecialCharsDecode</a></div><div class="sidebar-section-children"><a href="global.html#isValidFileType">isValidFileType</a></div><div class="sidebar-section-children"><a href="global.html#isValidUrl">isValidUrl</a></div><div class="sidebar-section-children"><a href="global.html#localDatabase">localDatabase</a></div><div class="sidebar-section-children"><a href="global.html#maximizeApp">maximizeApp</a></div><div class="sidebar-section-children"><a href="global.html#minimizeApp">minimizeApp</a></div><div class="sidebar-section-children"><a href="global.html#mouseSelectBox">mouseSelectBox</a></div><div class="sidebar-section-children"><a href="global.html#nodeFromAjax">nodeFromAjax</a></div><div class="sidebar-section-children"><a href="global.html#openDb">openDb</a></div><div class="sidebar-section-children"><a href="global.html#openDbError">openDbError</a></div><div class="sidebar-section-children"><a href="global.html#pageInIframe">pageInIframe</a></div><div class="sidebar-section-children"><a href="global.html#positionContextMenu">positionContextMenu</a></div><div class="sidebar-section-children"><a href="global.html#processUserIdentifier">processUserIdentifier</a></div><div class="sidebar-section-children"><a href="global.html#processVNodes">processVNodes</a></div><div class="sidebar-section-children"><a href="global.html#scaleValue">scaleValue</a></div><div class="sidebar-section-children"><a href="global.html#searchEnterHandler">searchEnterHandler</a></div><div class="sidebar-section-children"><a href="global.html#selectApp">selectApp</a></div><div class="sidebar-section-children"><a href="global.html#setCookie">setCookie</a></div><div class="sidebar-section-children"><a href="global.html#setupClock">setupClock</a></div><div class="sidebar-section-children"><a href="global.html#sha256Hash">sha256Hash</a></div><div class="sidebar-section-children"><a href="global.html#sizeNumberToString">sizeNumberToString</a></div><div class="sidebar-section-children"><a href="global.html#sleep">sleep</a></div><div class="sidebar-section-children"><a href="global.html#sort">sort</a></div><div class="sidebar-section-children"><a href="global.html#stripPx">stripPx</a></div><div class="sidebar-section-children"><a href="global.html#textDeSelect">textDeSelect</a></div><div class="sidebar-section-children"><a href="global.html#textSelect">textSelect</a></div><div class="sidebar-section-children"><a href="global.html#timeoutCheck">timeoutCheck</a></div><div class="sidebar-section-children"><a href="global.html#timeoutNotification">timeoutNotification</a></div><div class="sidebar-section-children"><a href="global.html#timestampToHuman">timestampToHuman</a></div><div class="sidebar-section-children"><a href="global.html#updateCalendar">updateCalendar</a></div><div class="sidebar-section-children"><a href="global.html#updateSlider">updateSlider</a></div></div></div></div></div><div class="navbar-container" id="VuAckcnZhf"><nav class="navbar"><div class="navbar-left-items"></div><div class="navbar-right-items"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div><nav></nav></nav></div><div class="toc-container"><div class="toc-content"><span class="bold">On this page</span><div id="eed4d2a0bfd64539bb9df78095dec881"></div></div></div><div class="body-wrapper"><div class="main-content"><div class="main-wrapper"><section id="source-page" class="source-page"><header><h1 id="title" class="has-anchor">events.js</h1></header><article><pre class="prettyprint source lang-js"><code>"use strict";

/**
 * @file Events handling script file
 * @author Jan Oskar Bukovský
 */

/**
 * Asynchronously reads a vNode file with the given UUID.
 * @param {string} uuid - The UUID of the vNode file to read.
 * @returns {boolean} - Returns true if the file was read successfully, false otherwise.
 */
async function fileRead(uuid) {
    cl("|📘 Reading vNode with uuid: ", uuid);
    const response = await ajax({ "method": "read", "fileUuid": uuid });
    if (response.status == "ok") {
        addNotification({ "head": "Čtení", "body": "Ok: " + response.uuid }, false, null, "info");
        return true;
    } else {
        addNotification({ "head": "Čtení", "body": "Chyba: " + response.details }, false, null, "warning");
        if (response.details == "sessionTimeout") {
            window.postMessage(["sessionTimeout"]);
        }
        return false;
    }
}

/**
 * Adds an event listener to the window that listens for a mouseout event.
 * When the mouseout event is triggered, it removes the "upload" class from the uploadElement.
 * @returns None
 */
window.addEventListener("mouseout", () => {
    uploadElement.classList.remove("upload");
});

/**
 * Event listener that triggers when the window loses focus. It performs a series of actions
 * to handle the blur event, including removing a CSS class from an upload element, closing
 * various menus and calendars, deselecting icons, and setting the active state for a specific app.
 * @returns None
 */
window.addEventListener("blur", () => {
    uploadElement.classList.remove("upload");
    if (iframesHelper.iframeMouseOver) {
        closeMainMenu();
        closeSearchbarMenu()
        closeDesktopCalendar();
        closeScreenMenu();
        deselectDesktopIcons();
        deselectAllApps();
        closeAllDesktopContextMenus();
        let app = iframesHelper.lastIframe;
        while (!app?.classList?.contains("windows-app")) {
            app = app.parentElement;
            if (app === null) {
                return false;
            }
        }
        app.classList.add("active");
        navbar.querySelector('[data-uuid="' + app.dataset.uuid + '"]').classList.add("active");
        app.style.zIndex = getLowestMaxAppZIndex();
    }
});


// Run `deselectBasedOnClick` when the user clicks to determine habavior of the app
window.addEventListener("mousedown", deselectBasedOnClick);
window.addEventListener("touchstart", deselectBasedOnClick);

/**
 * Handles the click event based on the element clicked.
 * Closes various menus based on the clicked element.
 * @param {Event} event - The click event object.
 * @returns None
 */
function deselectBasedOnClick(event) {
    if (!(bubbleToClass(event, "navbar-menu") || bubbleToClass(event, "main-menu"))) {
        closeMainMenu();
    }
    if (!(bubbleToClass(event, "search-menu") || bubbleToClass(event, "searchbar"))) {
        closeSearchbarMenu();
    }
    if (!(bubbleToClass(event, "calendar-container") || bubbleToClass(event, "datetime"))) {
        closeDesktopCalendar();
    }
    if (!(bubbleToClass(event, "navbar-screen") || bubbleToClass(event, "screen-menu"))) {
        closeScreenMenu();
    }
    // bubbleToClass(event, "windows-app")?.classList?.remove("active");
    deselectDesktopIcons();
    if (!bubbleToClass(event, "windows-app") &amp;&amp; !bubbleToClass(event, "navbar-icon")) {
        deselectAllApps();
    }
    if (!bubbleToClass(event, "context-menu")) {
        closeAllDesktopContextMenus();
    }
    uploadElement.classList.remove("upload");
}

/**
 * Adds a click event listener to the navbar menu that toggles the "open" class on the main menu.
 * @param {Event} event - The click event object.
 * @returns None
 */
navbar.querySelector(".navbar-menu").addEventListener("click", (event) => {
    if (bubbleToClass(event, "main-menu") != navbar.querySelector(".navbar-menu > .main-menu")) {
        navbar.querySelector(".navbar-menu > .main-menu").classList.toggle("open");
    }
});


/**
 * Event listener for handling the search functionality in the navbar.
 * Toggles the visibility of the search menu and focuses on the search input field when opened.
 * @param None
 * @returns None
 */
let searchEnterHandler = null;
navbar.querySelector(".navbar-search .navbar-button-content").addEventListener("click", () => {
    navbar.querySelector(".navbar-search > .search-menu").classList.toggle("open");
    if (navbar.querySelector(".navbar-search > .search-menu").classList.contains("open")) {
        navbar.querySelector(".navbar-search input[type=search]").focus();
    }
});

/**
 * Adds a click event listener to a navbar button that toggles the "open" class
 * on the screen menu element.
 * @param {Event} event - The event object triggered by the click.
 * @returns None
 */
navbar.querySelector(".navbar-screen .navbar-button-content").addEventListener("click", (event) => {
    navbar.querySelector(".navbar-screen .screen-menu").classList.toggle("open");
});

/**
 * Adds a click event listener to the navbar notifications button to toggle the visibility of notifications.
 * If the notifications are filled and the notifications container is not open, it removes the fill class.
 * @param None
 * @returns None
 */
navbar.querySelector(".navbar-notifications .navbar-button-content").addEventListener("click", () => {
    if (navbar.querySelector(".navbar-notifications #notifications").classList.contains("fill") &amp;&amp; !navbar.querySelector(".navbar-time > .notifications-container").classList.contains("open")) {
        navbar.querySelector(".navbar-notifications #notifications").classList.remove("fill");
    }
});

/**
 * Adds a click event listener to the "Clear All Notifications" button in the navbar.
 * Removes all notification elements with a closing animation.
 * @param None
 * @returns None
 */
navbar.querySelector(".navbar-notifications .notifications-container .clear-all-notifications").addEventListener("click", () => {
    navbar.querySelectorAll(".navbar-notifications .notifications-content > div.notification").forEach((element) => {
        element.classList.add("closing");
        setTimeout(() => {
            element.remove();
        }, 200);
    });
});

/**
 * Adds a click event listener to a specific element within the navbar to toggle the visibility
 * of the calendar container.
 * @param {string} selector - The CSS selector for the element to add the event listener to.
 * @returns None
 */
navbar.querySelector(".navbar-time .navbar-button-content").addEventListener("click", () => {
    navbar.querySelector(".navbar-time > .calendar-container").classList.toggle("open");
});

/**
 * Adds a click event listener to the navbar minimize button that minimizes all windows apps.
 * Deselects all apps and adds the 'minimized' class to each app element.
 * @param None
 * @returns None
 */
navbar.querySelector(".navbar-minimize").addEventListener("click", () => {
    // cl(".navbar-minimize");
    deselectAllApps();
    windows.querySelectorAll(".windows-app").forEach((app) => {
        app.classList.add("minimized");
    });
});

/**
 * Adds event listeners to the navigation icons in the calendar.
 * Updates the month and year based on the icon clicked and calls updateCalendar function.
 * @param None
 * @returns None
 */
document.querySelectorAll(".calendar-navigation span").forEach(icon => {
    icon.addEventListener("click", () => {
        month = icon.id === "calendar-prev" ? month - 1 : month + 1;
        if (month &lt; 0 || month > 11) {
            date = new Date(year, month, new Date().getDate());
            year = date.getFullYear();
            month = date.getMonth();
        } else {
            date = new Date();
        }
        updateCalendar();
    });
});

/**
 * Function to handle the event when the app iframe has finished loading.
 * It adds classes to the navbarHolder element to indicate that the iframe is running and active.
 * @returns None
 */
const appIframeLoaded = () => {
    cl("loaded iframe");
    navbarHolder.classList.add("running");
    navbarHolder.classList.add("active");
};

/**
 * Sets up a periodic check to monitor for timeouts.
 * @param {number} periodInS - The period in seconds at which to check for timeouts.
 * @returns None
 */
const timeoutCheck = (periodInS) => {
    setInterval(() => {
        ajax({ "method": "timeoutCheck" }).then(response => {
            if (response.status != "ok") {
                if (!shutdown) {
                    timeoutNotification();
                }
            }
        })
    }, periodInS * 1000);
}

/**
 * Sets up a message event listener on the window object to handle messages received from iframes.
 * @param {Event} event - The event object containing information about the message.
 * @returns None
 */
window.onmessage = async function (event) {
    // console.log(event);
    if (event.origin != location.origin) {
        cl("!📕 Origins do not match!!!")
        return;
    }
    cl("|📘 ReceivedFromIframe: ", event.data);
    const sourceIframe = [...windows.querySelectorAll('iframe')].find(
        iframe => iframe.contentWindow === event.source
    );
    switch (event.data[0]) {
        case "appOpen":
            const node = await localDatabase.getColumn("vNodes", "uuid", event.data[1]);
            appOpen(node[0]);
            break;
        case "sessionTimeout":
            if (!shutdown) {
                timeoutNotification();
            }
            shutdown = true;
            break;
        case "fileUploading":
            handleFileUpload(event.data[1], bubbleToClassFromElement(sourceIframe, "windows-app").dataset.uuid);
            break;
        case "processVNodes":
            processVNodes(event.data[1]);
            break;
        case "focus":
            document.querySelector(".uploading").classList.remove("upload");
            selectApp(bubbleToClassFromElement(sourceIframe, "windows-app").dataset.uuid);
            break;
        case "notification":
            addNotification(event.data[1], event.data[2], event.data[3], event.data[4]);
            break;
        default:
            cl("!📕 Neznámá zpráva z okna!")
    }
};

/**
 * Adds an event listener for the "resize" event that triggers the windowResize method
 * of the appResizing object.
 * @param {string} "resize" - The event type to listen for.
 * @param {function} () => { appResizing.windowResize(); } - The callback function to execute when the event is triggered.
 * @returns None
 */
window.addEventListener("resize", () => {
    appResizing.windowResize();
});

/**
 * Sets the appResizing status to true and assigns the current object as the second element in the status array.
 * @returns None
 */
function appResizeDown() {
    appResizing.status = [true, this];
}
/**
 * Set the appResizing status to false, indicating that the app is not resizing up.
 * @returns None
 */
function appResizeUp() {
    appResizing.status = [false];
}

/**
 * Event listener for the "dragover" event that prevents the default behavior.
 * @param {Event} event - The event object for the "dragover" event.
 * @returns None
 */
desktop.addEventListener("dragover", (event) => {
    event.preventDefault();
});

/**
 * Event listener for the "dragenter" event that prevents the default behavior
 * and adds the "upload" class to the upload element.
 * @param {Event} event - The event object for the dragenter event.
 * @returns None
 */
desktop.addEventListener("dragenter", (event) => {
    event.preventDefault();
    uploadElement.classList.add("upload");
});
/**
 * Adds an event listener to handle the "dragleave" event on the upload element.
 * Prevents the default behavior of the event and removes the "upload" class from the upload element.
 * @param {Event} event - The dragleave event object.
 * @returns None
 */
uploadElement.addEventListener("dragleave", (event) => {
    event.preventDefault();
    uploadElement.classList.remove("upload");
});

/**
 * Adds an event listener for the "drop" event to handle file uploads.
 * Removes the "upload" class from the upload element, prevents the default behavior of the event,
 * retrieves the files from the data transfer, assigns the files to the fileUpload element, and
 * calls the handleFileUpload function with the files.
 * @param {string} event - The event to listen for ("drop").
 * @param {function} callback - The function to execute when the event occurs.
 * @returns None
 */
desktop.addEventListener("drop", async (event) => {
    uploadElement.classList.remove("upload");
    event.preventDefault();
    const files = event.dataTransfer.files;
    if (files.length) {
        fileUpload.files = files;
        const desktopNode = localDatabase.getColumn("vNodes", "type", "desktop");
        handleFileUpload(files, parentUuid[0].uuid);
    }
});

/**
 * Adds a double click event listener to the given element to open a context menu.
 * Retrieves data from local database based on the element's UUID and updates the timestamp.
 * @param {Element} element - The element to attach the event listener to.
 * @returns None
 */
function desktopIconOpener(element) {
    element.addEventListener("dblclick", (event) => {
        closeAllDesktopContextMenus();
        // cl("Open Window from Desktop\n", holder);
        let dbStore = localDatabase.getStore("vNodes");

        let idRequest = dbStore.get(element.childNodes[1].dataset.uuid);
        // cl("holder.childNodes[1].dataset.id: ", holder.childNodes[1].dataset.uuid);
        idRequest.onsuccess = function () {
            let data = idRequest.result;
            // cl("get success: ", data);
            data.timeRead = Date.now();

            let putRequest = dbStore.put(data);
            putRequest.onsuccess = function () {
                // cl("put success: ", putRequest);
            }

            appOpen(data);
        }
        event.preventDefault();
    });
}

/**
 * Allows the user to edit the name of a desktop icon by double-clicking on it.
 * @param {Element} element - The desktop icon element to edit the name of.
 * @returns None
 */
function desktopIconEditName(element) {
    /**
     * Function to handle the 'Enter' key press event to save the changes.
     * @param {Event} event - The event object triggered by the key press.
     * @returns None
     */
    function enterToSave(event) {
        event.stopImmediatePropagation();
        if (event.key == "Enter") {
            event.preventDefault();
            stopEdit(event);
        }
    }

    /**
     * Disables editing on the target element, deselects any text, and removes the event listener for saving on keydown.
     * @param {Event} event - The event object triggered by the action.
     * @returns None
     */
    function stopEdit(event) {
        event.target.readOnly = true;
        textDeSelect();
        try {
            event.target.removeEventListener("keydown", enterToSave);
        } catch (e) {
            cl("error: ", e);
        }
    }

    /**
     * Event listener for double click event on an element. 
     * Closes all desktop context menus, adds event listener for keydown event to save changes,
     * selects text within the element, toggles the readOnly property of the element, and stops event propagation.
     * @param {Event} event - The double click event object.
     * @returns None
     */
    element.addEventListener("dblclick", (event) => {
        closeAllDesktopContextMenus();
        let element = event.toElement;
        element.addEventListener("keydown", enterToSave);
        if (element.readOnly) {
            textSelect(element, 0, element.value.lastIndexOf("."))
            element.readOnly = !element.readOnly
        }
        event.stopPropagation();
    });
    /**
     * Event listener for the "focusout" event that calls the stopEdit function.
     * @param {Event} event - The event object triggered by the "usout" event.
     * @returns None
     */
    element.addEventListener("focusout", (event) => {
        // cl("srcElement deprecated; Event: ", event)
        // event.target.readOnly = true;
        // textDeSelect()
        stopEdit(event);
    });
}

/**
 * Deselects all desktop icons by removing the "icon-selected" class from each selected icon.
 * @returns None
 */
function deselectDesktopIcons() {
    // cl("deselecting desktop icons");
    document.querySelectorAll("figure.icon.icon-selected").forEach((el) => {
        el.classList.remove("icon-selected");
    });
    // navbar.querySelector(".navbar-time").children[0].classList.remove("open");
    // navbar.querySelector(".navbar-search").children[0].classList.remove("open");
}

/**
 * Adds a context menu event listener to the desktop.
 * This creates a custom right-click menu for the desktop area.
 *
 * @param {string} "contextmenu" - The event type to listen for.
 * @param {function} event => {...} - The callback function to handle the context menu event.
 * @listens {Event} contextmenu
 */
desktop.addEventListener("contextmenu", (event) => {
    const container = createElement("div", new ClassList("context-menu", "open", "no-select"), new ElementEvent("contextmenu", (event) => {
        event.preventDefault();
        event.stopPropagation();
    }), new ElementEvent("click", (event) => {
        container.remove();
    }));

    let timeout;
    let newPopup;
    const createNew = createElement("span", new ClassList("extra", "material-symbols-rounded-after"), new TextContent("Nový"), new AppendTo(container), new ElementEvent("mouseenter", (event) => {
        timeout = setTimeout(() => {
            if (!newPopup &amp;&amp; createNew.matches(':hover')) {
                newPopup = createElement("div", new ClassList("context-menu", "open", "no-select"), new AppendTo(createNew));
                const newFolder = createElement("span", new TextContent("Složka"), new AppendTo(newPopup), new ElementEvent("click", ElementEvents.folderCreate));
                const newHr = createElement("hr", new AppendTo(newPopup));
                const newText = createElement("span", new TextContent("Textový dokument"), new AppendTo(newPopup), new ElementEvent("click", ElementEvents.fileCreate));

                newPopup.style.left = createNew.getBoundingClientRect().width + 1 + "px";
                if (newPopup.getBoundingClientRect().right > desktop.getBoundingClientRect().right) {
                    newPopup.style.left = "unset";
                    newPopup.style.right = createNew.getBoundingClientRect().width + 1 + "px";

                }
                newPopup.style.bottom = "-2px";
            }
        }, 450);
    }), new ElementEvent("mouseleave", (event) => {
        if (newPopup) {
            createNew.querySelectorAll(".context-menu").forEach(element => {
                element.remove();
            });
            newPopup = null;
            if (timeout) {
                clearTimeout(timeout);
            }
            timeout = null;
        }
    }), new ElementEvent("click", (event) => {
        // event.stopImmediatePropagation();
    }));

    const properties = createElement("span", new TextContent("Vlastnosti"), new AppendTo(container));

    positionContextMenu(container, desktop);
});

/**
 * Adds a context menu event listener to a desktop icon element.
 * @param {HTMLElement} element - The desktop icon element to add the event listener to.
 * @param {vNode} node - The vNode element containing the information about the desktop icon.
 * @returns None
 */
function desktopIconContextMenu(element, node) {
    element.addEventListener("contextmenu", function (event) {
        event.stopPropagation();
        // cl("Open ContextMenu from Desktop\n", element, node);

        deselectDesktopIcons();
        element.classList.add("icon-selected");

        event.preventDefault();
        const tooltip = element.querySelector(".icon-tooltip");
        if (tooltip) {
            tooltip.classList.remove("active");
            setTimeout(() => tooltip.remove(), 250);
        }
        closeMainMenu();
        closeSearchbarMenu()
        closeDesktopCalendar();
        closeScreenMenu();
        deselectAllApps();
        closeAllDesktopContextMenus();

        const container = createElement("div", new ClassList("context-menu", "open", "no-select"), new ElementEvent("contextmenu", (event) => {
            event.preventDefault();
            event.stopPropagation();
        }));

        const open = createElement("span", new TextContent("Otevřít"), new AppendTo(container), new ElementEvent("click", () => { appOpen(node) }));

        if (node.type == "file" &amp;&amp; node.name.split(".").pop() == "txt") {
            const edit = createElement("span", new TextContent("Upravit"), new AppendTo(container));
        }

        if (node.type == "file") {
            const print = createElement("span", new TextContent("Tisknout"), new AppendTo(container), new ElementEvent("click", () => {
                const iframe = createElement("iframe", new ClassList("hidden"), new Src(getDestination(node)), new AppendTo(document.body), new ElementEvent("afterprint", () => self.close));
                cl("Printing: ", iframe);
                iframe.contentWindow.print();
                setTimeout(() => {
                    iframe.remove();
                }, 300000);
            }));
        }

        const hr1 = createElement("hr", new AppendTo(container));

        const copy = createElement("span", new TextContent("Kopírovat"), new AppendTo(container));

        if (node.type != "link") {
            const download = createElement("span", new TextContent("Stáhnout"), new AppendTo(container));
        }

        const hr2 = createElement("hr", new AppendTo(container));

        if (node.permissions.canDelete) {
            const remove = createElement("span", new TextContent("Odstranit"), new AppendTo(container), new ElementEvent("click", ElementEvents.fileDelete));
        }
        const rename = createElement("span", new TextContent("Přejmenovat"), new AppendTo(container));

        const hr3 = createElement("hr", new AppendTo(container));

        const properties = createElement("span", new TextContent("Vlastnosti"), new AppendTo(container));

        positionContextMenu(container, element, desktop);
    });
}

/**
 * Adds a context menu event listener to the desktop.
 * This creates a custom right-click menu for the desktop area.
 *
 * @param {string} "contextmenu" - The event type to listen for.
 * @param {function} event => {...} - The callback function to handle the context menu event.
 * @listens {Event} contextmenu
 */
const fileSearchInputHandler = debounce((query) => {
    cl("|📘 Searching for vNode: ", query);
    localDatabase.getColumn("vNodes", "type", "desktop").then(desktopNode => {
        const data = { "method": "search", "query": query };
        cl("|📗 Sending data:", data);
        ajax(data).then(response => {
            if (response.status == "ok") {
                addNotification({ "head": "Hledání", "body": "Ok: \"" + query + "\"" }, false, null, "info");
            } else {
                addNotification({ "head": "Hledání", "body": "Chyba: " + response.details }, false, null, "warning");
            }
        });
    });
}, 350);

/**
 * Adds an input event listener to the search bar in the navbar.
 * This listener triggers a search function when the user types in the search bar.
 */
navbar.querySelector(".navbar-search .search-bar>input[type=search]").addEventListener("input", async (event) => {
    const query = event.target.value;
    fileSearchInputHandler(query)
});

/**
 * Adds a keydown event listener to the document for handling various keyboard shortcuts for selecting desktop icons.
 * @param {Event} event - The event object containing information about the keyboard event.
 * @returns None
 */
document.addEventListener("keydown", async (event) => {
    if (event.ctrlKey &amp;&amp; (event.key == "a" || event.key == "A") &amp;&amp; event.target != navbar.querySelector(".navbar-search input[type=search]")) {
        deselectDesktopIcons();
        closeMainMenu();
        closeSearchbarMenu()
        closeDesktopCalendar();
        closeScreenMenu();
        deselectAllApps();
        closeAllDesktopContextMenus();
        desktop.querySelectorAll(".icon").forEach((element) => {
            element.classList.add("icon-selected");
        });
        return;
    }
    switch (event.key) {
        case "Escape":
            closeAllDesktopContextMenus();
            deselectDesktopIcons();
            break;
        case "Enter":
            desktop.querySelectorAll(".icon-selected > figcaption").forEach(async (element) => {
                const node = await localDatabase.getColumn("vNodes", "uuid", element.dataset.uuid);
                appOpen(node[0]);
            });
            break;
        case "ArrowUp":
        case "ArrowLeft":
            const up = document.querySelector(".icon:has(+ .icon-selected)");
            if (up) {
                if (!event.shiftKey) {
                    deselectDesktopIcons();
                }
                up.classList.add("icon-selected");
            }
            break;
        case "ArrowDown":
        case "ArrowRight":
            // const down = desktop.querySelector(".icon-selected + *")
            const down = desktop.querySelector(".icon-selected:not(:has(~ .icon-selected)) + *");
            if (down) {
                if (!event.shiftKey) {
                    deselectDesktopIcons();
                }
                down.classList.add("icon-selected");
            }
            break;
        default:
            return;
    }
});

/**
 * Adds click event listener to a desktop icon element for selection functionality.
 * @param {HTMLElement} element - The desktop icon element to add the event listener to.
 */
function desktopIconSelect(element) {
    element.addEventListener("click", (event) => {
        if (!is_key_down("Control")) {
            deselectDesktopIcons();
        }
        element.classList.toggle("icon-selected");
        closeMainMenu();
        closeSearchbarMenu()
        closeDesktopCalendar();
        closeScreenMenu();
        closeAllDesktopContextMenus();
        event.stopPropagation();
    })
}

/**
 * Adds event listeners for brightness and blue light filter controls
 */
window.addEventListener("DOMContentLoaded", () => {
    let brightness = navbar.querySelector(".screen-menu > .slider-brightness > input")
    function brightnessChange() {
        const percentage = updateSlider(brightness);
        cssVar("--brightness", (95 - percentage) + "%");
    }
    brightness.oninput = brightnessChange;
    brightnessChange(brightness);

    let blueLightFilter = navbar.querySelector(".screen-menu > .slider-blue-light-filter > input")
    function blueLightFilterChange() {
        const percentage = updateSlider(blueLightFilter);
        cssVar("--blue-filter", percentage + "%");
    }
    blueLightFilter.oninput = blueLightFilterChange;
    blueLightFilterChange(blueLightFilter);
});

/**
 * Sets up mouse selection functionality for desktop icons.
 * This function creates a selection box that allows users to select multiple desktop icons
 * by clicking and dragging the mouse.
 */
function mouseSelectBox() {
    let selecting;
    let startX, startY;
    let selectBox;
    let desktopSize;
    let desktopIcons;

    function selectStart(target, position) {
        if (target == desktop) {
            startX = position[0];
            startY = position[1];
            selectBox = createElement("div", new ClassList("select-box"), new AppendTo(desktop));
            selecting = true;
            deselectDesktopIcons();
            desktopSize = desktop.getBoundingClientRect();
            desktopIcons = desktop.querySelectorAll(".icon");
        }
    }

    function selectMove(position) {
        if (selecting) {
            let mouseX = position[0];
            let mouseY = position[1];

            if (mouseX > desktopSize.width - 2) {
                mouseX = desktopSize.width - 2;
            }
            if (mouseX &lt; 0) {
                mouseX = 0;
            }
            if (mouseY > desktopSize.height) {
                mouseY = desktopSize.height;
            }
            if (mouseY &lt; 0) {
                mouseY = 0;
            }

            if (mouseX &lt; startX) {
                selectBox.style.left = mouseX + "px";
                selectBox.style.width = (startX - mouseX) + "px";
            } else {
                selectBox.style.left = startX + "px";
                selectBox.style.width = (mouseX - startX) + "px";
            }
            if (mouseY &lt; startY) {
                selectBox.style.top = mouseY + "px";
                selectBox.style.height = (startY - mouseY) + "px";
            } else {
                selectBox.style.top = startY + "px";
                selectBox.style.height = (mouseY - startY) + "px";
            }

            desktopIcons.forEach((element) => {
                if (elementsCollide(element, selectBox)) {
                    element.classList.add("icon-selected");
                } else {
                    element.classList.remove("icon-selected");
                }
            });
        }
    }

    function deSelect() {
        if (selecting) {
            selectBox.remove();
        }
        selecting = false;
    }

    window.addEventListener("mousedown", (event) => selectStart(event.target, [event.clientX, event.clientY]));
    window.addEventListener("touchstart", (event) => selectStart(event.target, [event.touches[0].clientX, event.touches[0].clientY]));

    window.addEventListener("mousemove", (event) => selectMove([event.clientX, event.clientY]));
    window.addEventListener("touchmove", (event) => selectMove([event.touches[0].clientX, event.touches[0].clientY]));

    window.addEventListener("mouseup", deSelect);
    window.addEventListener("touchend", deSelect);
    window.addEventListener("blur", deSelect);
}

// Handles logout from main menu
powerButton.addEventListener("click", async () => {
    const exitVideo = createElement("video", new Id("logoutAnimation"));
    const source = createElement("source", new Src("media/login/bloomReverse.mp4"), new Type("video/mp4"), new AppendTo(exitVideo));
    document.body.appendChild(exitVideo);
    exitVideo.play();
    await sleep(2500);
    location.replace(location.origin + "/~bukovja4/public/auth.php?method=logout");
});

// Testing
if (DEBUG) {
    navbar.querySelector(".main-menu .controls > .user").addEventListener("click", () => {
        addNotification({ "head": "Hlavní menu", "body": "Kliknul jsi na ikonku uživatele" });
    });
}</code></pre></article></section></div></div></div><div class="search-container" id="PkfLWpAbet" style="display:none"><div class="wrapper" id="iCxFxjkHbP"><button class="icon-button search-close-button" id="VjLlGakifb" aria-label="close search"><svg><use xlink:href="#close-icon"></use></svg></button><div class="search-box-c"><svg><use xlink:href="#search-icon"></use></svg> <input type="text" id="vpcKVYIppa" class="search-input" placeholder="Search..." autofocus></div><div class="search-result-c" id="fWwVHRuDuN"><span class="search-result-c-text">Type anything to view search result</span></div></div></div><div class="mobile-menu-icon-container"><button class="icon-button" id="mobile-menu" data-isopen="false" aria-label="menu"><svg><use xlink:href="#menu-icon"></use></svg></button></div><div id="mobile-sidebar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><div class="mobile-nav-links"></div><div class="mobile-sidebar-items-c"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="Alt.html">Alt</a></div><div class="sidebar-section-children"><a href="AppendTo.html">AppendTo</a></div><div class="sidebar-section-children"><a href="ClassList.html">ClassList</a></div><div class="sidebar-section-children"><a href="Cols.html">Cols</a></div><div class="sidebar-section-children"><a href="Data.html">Data</a></div><div class="sidebar-section-children"><a href="ElementEvent.html">ElementEvent</a></div><div class="sidebar-section-children"><a href="ElementEvents.html">ElementEvents</a></div><div class="sidebar-section-children"><a href="Id.html">Id</a></div><div class="sidebar-section-children"><a href="Name.html">Name</a></div><div class="sidebar-section-children"><a href="ReadOnly.html">ReadOnly</a></div><div class="sidebar-section-children"><a href="SandBox.html">SandBox</a></div><div class="sidebar-section-children"><a href="Src.html">Src</a></div><div class="sidebar-section-children"><a href="TextContent.html">TextContent</a></div><div class="sidebar-section-children"><a href="Type.html">Type</a></div><div class="sidebar-section-children"><a href="dbShape.html">dbShape</a></div><div class="sidebar-section-children"><a href="user.html">user</a></div><div class="sidebar-section-children"><a href="userSettings.html">userSettings</a></div><div class="sidebar-section-children"><a href="vData.html">vData</a></div><div class="sidebar-section-children"><a href="vNode.html">vNode</a></div><div class="sidebar-section-children"><a href="vPermission.html">vPermission</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#DEBUG">DEBUG</a></div><div class="sidebar-section-children"><a href="global.html#addNotification">addNotification</a></div><div class="sidebar-section-children"><a href="global.html#ajax">ajax</a></div><div class="sidebar-section-children"><a href="global.html#appIframeLoaded">appIframeLoaded</a></div><div class="sidebar-section-children"><a href="global.html#appOpen">appOpen</a></div><div class="sidebar-section-children"><a href="global.html#appResizeDown">appResizeDown</a></div><div class="sidebar-section-children"><a href="global.html#appResizeUp">appResizeUp</a></div><div class="sidebar-section-children"><a href="global.html#appendBefore">appendBefore</a></div><div class="sidebar-section-children"><a href="global.html#authSubmit">authSubmit</a></div><div class="sidebar-section-children"><a href="global.html#bool">bool</a></div><div class="sidebar-section-children"><a href="global.html#bubbleToClass">bubbleToClass</a></div><div class="sidebar-section-children"><a href="global.html#bubbleToClassFromElement">bubbleToClassFromElement</a></div><div class="sidebar-section-children"><a href="global.html#cl">cl</a></div><div class="sidebar-section-children"><a href="global.html#closeAllDesktopContextMenus">closeAllDesktopContextMenus</a></div><div class="sidebar-section-children"><a href="global.html#closeAllExplorerContextMenus">closeAllExplorerContextMenus</a></div><div class="sidebar-section-children"><a href="global.html#closeApp">closeApp</a></div><div class="sidebar-section-children"><a href="global.html#closeDesktopCalendar">closeDesktopCalendar</a></div><div class="sidebar-section-children"><a href="global.html#closeMainMenu">closeMainMenu</a></div><div class="sidebar-section-children"><a href="global.html#closeScreenMenu">closeScreenMenu</a></div><div class="sidebar-section-children"><a href="global.html#closeSearchbarMenu">closeSearchbarMenu</a></div><div class="sidebar-section-children"><a href="global.html#countAllFiles">countAllFiles</a></div><div class="sidebar-section-children"><a href="global.html#countSelectedFiles">countSelectedFiles</a></div><div class="sidebar-section-children"><a href="global.html#createElement">createElement</a></div><div class="sidebar-section-children"><a href="global.html#cssVar">cssVar</a></div><div class="sidebar-section-children"><a href="global.html#dbName">dbName</a></div><div class="sidebar-section-children"><a href="global.html#dbStores">dbStores</a></div><div class="sidebar-section-children"><a href="global.html#debounce">debounce</a></div><div class="sidebar-section-children"><a href="global.html#deleteDb">deleteDb</a></div><div class="sidebar-section-children"><a href="global.html#deselectAll">deselectAll</a></div><div class="sidebar-section-children"><a href="global.html#deselectAllApps">deselectAllApps</a></div><div class="sidebar-section-children"><a href="global.html#deselectBasedOnClick">deselectBasedOnClick</a></div><div class="sidebar-section-children"><a href="global.html#deselectDesktopIcons">deselectDesktopIcons</a></div><div class="sidebar-section-children"><a href="global.html#desktopIconContextMenu">desktopIconContextMenu</a></div><div class="sidebar-section-children"><a href="global.html#desktopIconEditName">desktopIconEditName</a></div><div class="sidebar-section-children"><a href="global.html#desktopIconOpener">desktopIconOpener</a></div><div class="sidebar-section-children"><a href="global.html#desktopIconSelect">desktopIconSelect</a></div><div class="sidebar-section-children"><a href="global.html#desktopIconTooltip">desktopIconTooltip</a></div><div class="sidebar-section-children"><a href="global.html#dragApp">dragApp</a></div><div class="sidebar-section-children"><a href="global.html#elementsCollide">elementsCollide</a></div><div class="sidebar-section-children"><a href="global.html#fileRead">fileRead</a></div><div class="sidebar-section-children"><a href="global.html#fileSearchInputHandler">fileSearchInputHandler</a></div><div class="sidebar-section-children"><a href="global.html#getBattery">getBattery</a></div><div class="sidebar-section-children"><a href="global.html#getBluetooth">getBluetooth</a></div><div class="sidebar-section-children"><a href="global.html#getCookie">getCookie</a></div><div class="sidebar-section-children"><a href="global.html#getDestination">getDestination</a></div><div class="sidebar-section-children"><a href="global.html#getIcon">getIcon</a></div><div class="sidebar-section-children"><a href="global.html#getIconTooltipText">getIconTooltipText</a></div><div class="sidebar-section-children"><a href="global.html#getLowestMaxAppZIndex">getLowestMaxAppZIndex</a></div><div class="sidebar-section-children"><a href="global.html#getMethods">getMethods</a></div><div class="sidebar-section-children"><a href="global.html#getParam">getParam</a></div><div class="sidebar-section-children"><a href="global.html#handleFileUpload">handleFileUpload</a></div><div class="sidebar-section-children"><a href="global.html#handleLogin">handleLogin</a></div><div class="sidebar-section-children"><a href="global.html#handleRegister">handleRegister</a></div><div class="sidebar-section-children"><a href="global.html#htmlSpecialCharsDecode">htmlSpecialCharsDecode</a></div><div class="sidebar-section-children"><a href="global.html#isValidFileType">isValidFileType</a></div><div class="sidebar-section-children"><a href="global.html#isValidUrl">isValidUrl</a></div><div class="sidebar-section-children"><a href="global.html#localDatabase">localDatabase</a></div><div class="sidebar-section-children"><a href="global.html#maximizeApp">maximizeApp</a></div><div class="sidebar-section-children"><a href="global.html#minimizeApp">minimizeApp</a></div><div class="sidebar-section-children"><a href="global.html#mouseSelectBox">mouseSelectBox</a></div><div class="sidebar-section-children"><a href="global.html#nodeFromAjax">nodeFromAjax</a></div><div class="sidebar-section-children"><a href="global.html#openDb">openDb</a></div><div class="sidebar-section-children"><a href="global.html#openDbError">openDbError</a></div><div class="sidebar-section-children"><a href="global.html#pageInIframe">pageInIframe</a></div><div class="sidebar-section-children"><a href="global.html#positionContextMenu">positionContextMenu</a></div><div class="sidebar-section-children"><a href="global.html#processUserIdentifier">processUserIdentifier</a></div><div class="sidebar-section-children"><a href="global.html#processVNodes">processVNodes</a></div><div class="sidebar-section-children"><a href="global.html#scaleValue">scaleValue</a></div><div class="sidebar-section-children"><a href="global.html#searchEnterHandler">searchEnterHandler</a></div><div class="sidebar-section-children"><a href="global.html#selectApp">selectApp</a></div><div class="sidebar-section-children"><a href="global.html#setCookie">setCookie</a></div><div class="sidebar-section-children"><a href="global.html#setupClock">setupClock</a></div><div class="sidebar-section-children"><a href="global.html#sha256Hash">sha256Hash</a></div><div class="sidebar-section-children"><a href="global.html#sizeNumberToString">sizeNumberToString</a></div><div class="sidebar-section-children"><a href="global.html#sleep">sleep</a></div><div class="sidebar-section-children"><a href="global.html#sort">sort</a></div><div class="sidebar-section-children"><a href="global.html#stripPx">stripPx</a></div><div class="sidebar-section-children"><a href="global.html#textDeSelect">textDeSelect</a></div><div class="sidebar-section-children"><a href="global.html#textSelect">textSelect</a></div><div class="sidebar-section-children"><a href="global.html#timeoutCheck">timeoutCheck</a></div><div class="sidebar-section-children"><a href="global.html#timeoutNotification">timeoutNotification</a></div><div class="sidebar-section-children"><a href="global.html#timestampToHuman">timestampToHuman</a></div><div class="sidebar-section-children"><a href="global.html#updateCalendar">updateCalendar</a></div><div class="sidebar-section-children"><a href="global.html#updateSlider">updateSlider</a></div></div></div><div class="mobile-navbar-actions"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div></div></div><script type="text/javascript" src="scripts/core.min.js"></script><script src="scripts/search.min.js" defer="defer"></script><script src="scripts/third-party/fuse.js" defer="defer"></script><script type="text/javascript">var tocbotInstance=tocbot.init({tocSelector:"#eed4d2a0bfd64539bb9df78095dec881",contentSelector:".main-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,scrollContainer:".main-content",headingsOffset:130,onClick:bringLinkToView})</script></body></html>